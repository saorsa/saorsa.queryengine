<mat-card>
  <form *ngIf="formGroup && typeDefinition" class="d-inline p-0 m-0" [formGroup]="formGroup">
    <mat-form-field>
      <mat-label>Property</mat-label>
      <mat-select formControlName="name"
                  (selectionChange)="onPropertySelect($event.value)"
                  placeholder="Select a property">
        <mat-option *ngFor="let p of typeDefinition.properties" [value]="p.name">
          {{p.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field *ngIf="selectedProperty">
      <mat-label>Filter</mat-label>
      <mat-select [formControl]="filterTypeControl" (selectionChange)="onFilterTypeSelect($event.value)" placeholder="Select a filter">
        <mat-option *ngFor="let f of selectedProperty.allowedFilters" [value]="f.filterType">
          {{f.filterType}}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <app-property-argument-array-control
      formArrayName="arguments"
      (changes)="onArgumentsChange($event)"
      [formGroup]="formGroup"
      [type]="typeDefinition"
      [property]="selectedProperty"
      [filterDefinition]="selectedFilterDefinition"></app-property-argument-array-control>
  </form>
  <div class="alert alert-info" *ngIf="formGroup">
    <div>
      <b>Property Filter Is Valid = </b>
      <span [ngClass]="{'text-danger': !formGroup.valid}">{{formGroup.valid}}</span>
    </div>
    <div></div>
    {{formGroup.value | json}}
  </div>
</mat-card>
