<form *ngIf="formGroup && typeDefinition" class="d-inline p-0 m-0" [formGroup]="formGroup">
  <mat-form-field>
    <mat-label>Property</mat-label>
    <mat-select formControlName="name"
                (selectionChange)="onPropertySelect($event.value)"
                placeholder="Select a property">
      <mat-option *ngFor="let p of typeDefinition.properties" [value]="p.name">
        {{p.name}}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <mat-form-field *ngIf="selectedProperty">
    <mat-label>Filter</mat-label>
    <mat-select [formControl]="filterTypeControl" (selectionChange)="onFilterTypeSelect($event.value)" placeholder="Select a filter">
      <mat-option *ngFor="let f of selectedProperty.allowedFilters" [value]="f.filterType">
        {{f.filterType}}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <span *ngIf="selectedFilterDefinition?.arg1Required">
     <app-filter-arg-array
       [type]="typeDefinition"
       [property]="selectedProperty"
       [filterType]="selectedFilterType"
     ></app-filter-arg-array>
    </span>
</form>


<div class="alert alert-info" *ngIf="formGroup">
  <div>{{formGroup.valid}}</div>
  {{formGroup.value | json}}
</div>

